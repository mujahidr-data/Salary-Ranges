# Release Notes v3.3.0 - Simplified Category System

**Released**: 2025-11-27  
**Deployed**: âœ… Google Apps Script  
**Git**: âœ… Committed and pushed to `main`

---

## ğŸ¯ Overview

Simplified the salary range calculator from **3 categories to 2 categories** with updated range definitions and user-friendly labels.

---

## ğŸ“Š What Changed

### Before (v3.2.0): 3 Categories
- **X0**: P62.5 â†’ P75 â†’ P90 (Top of market)
- **X1**: P50 â†’ P62.5 â†’ P75 (Mid-market)
- **Y1**: P40 â†’ P50 â†’ P62.5 (Entry-level)

### After (v3.3.0): 2 Categories

| Category | For | Range Definition |
|----------|-----|------------------|
| **X0** | Engineering & Product | **P25** (start) â†’ **P50** (mid) â†’ **P90** (end) |
| **Y1** | Everyone Else | **P10** (start) â†’ **P40** (mid) â†’ **P62.5** (end) |

---

## ğŸ·ï¸ Label Changes

### Column Headers Updated

| Old Label | New Label | Purpose |
|-----------|-----------|---------|
| P62.5 / P40 | **Range Start** | Minimum of salary range |
| P75 / P50 | **Range Mid** | Midpoint of salary range |
| P90 / P62.5 | **Range End** | Maximum of salary range |

**Benefit**: More user-friendly, hides technical percentile details from end users

---

## âœ¨ Key Features

### 1. **Auto-Assignment of Category**
- Category is now **automatically determined** based on job family
- Engineering (EN.*) and specific TE roles â†’ **X0**
- All other roles â†’ **Y1**
- Users no longer need to manually select between X0/X1

### 2. **Simplified Category Picker**
- Dropdown now shows only **X0** and **Y1**
- Old X1 selections automatically converted to X0
- Clearer choices for users

### 3. **Updated Range Logic**
- **X0 (Engineering/Product)**: Wider range (P25-P90) for competitive engineering salaries
- **Y1 (Everyone Else)**: Standard range (P10-P62.5) for all other roles

---

## ğŸ”§ Technical Changes

### Functions Updated:
- `_rangeByCategory_()` - New range calculations
- `_effectiveCategoryForFamily_()` - Simplified logic
- `ensureCategoryPicker_()` - Only X0/Y1 options
- `buildCalculatorUI_()` - Updated column headers
- `_getRangeFromFullList_()` - New percentile mappings
- `exportProposedSalaryRanges_()` - Validation updated

### Documentation Updated:
- Help sheet instructions
- Inline code comments
- Instructions dialog
- All references to X1 removed

---

## ğŸ“‹ Testing Checklist

After deployment, verify:

### Basic Functionality
- [ ] Open your Salary Ranges sheet
- [ ] Category dropdown shows only **X0** and **Y1**
- [ ] Column headers show **"Range Start"**, **"Range Mid"**, **"Range End"**
- [ ] Old sheets with X1 selections auto-convert to X0

### Engineering Roles (X0)
- [ ] Select an Engineering job family (e.g., EN.SODE)
- [ ] Region: US, Level: L5 IC
- [ ] Verify ranges use **P25 â†’ P50 â†’ P90**
- [ ] Example: ~$98K (start) â†’ $146K (mid) â†’ $210K (end)

### Non-Engineering Roles (Y1)
- [ ] Select a non-engineering family (e.g., Finance - FP&A)
- [ ] Region: US, Level: L5 IC
- [ ] Verify ranges use **P10 â†’ P40 â†’ P62.5**
- [ ] Lower start, lower end compared to X0

### Calculations
- [ ] Formulas calculate without errors
- [ ] SALARY_RANGE() function works
- [ ] INTERNAL_STATS() displays correctly
- [ ] Full List rebuild succeeds

---

## ğŸ¨ Visual Changes

### In Your Spreadsheet

**Before**:
```
Category: [X0 â–¼] [X1 â–¼] [Y1 â–¼]

Level    | P62.5    | P75      | P90
L5 IC    | $146,700 | $151,900 | $158,000
```

**After**:
```
Category: [X0 â–¼] [Y1 â–¼]

Level    | Range Start | Range Mid | Range End
L5 IC    | $98,200     | $146,700  | $210,500
```

---

## âš ï¸ Breaking Changes

### For Existing Users:
1. **X1 category removed** - Any sheets using X1 will auto-convert to X0
2. **Range values changed** - X0 ranges are now wider (P25-P90 instead of P62.5-P90)
3. **Column headers renamed** - Any external references to "P62.5", "P75", "P90" need updating

### Migration Path:
- âœ… **Automatic** - No user action required
- Old X1 selections â†’ Auto-converted to X0
- Existing formulas â†’ Continue working
- Category logic â†’ Automatically determined by job family

---

## ğŸ“– Updated Documentation

Files updated:
- âœ… `SalaryRangesCalculator.gs` - All calculation logic
- âœ… `CHANGELOG.md` - Version history
- âœ… Help sheet instructions
- âœ… Inline code comments

---

## ğŸš€ Deployment Status

**Git Repository**: âœ… Committed (`5847122`)
```
Commit: v3.3.0: Simplify to 2 categories with updated ranges
Branch: main
Files: 2 changed, 69 insertions(+), 35 deletions(-)
```

**Apps Script**: âœ… Deployed
```
Pushed 3 files successfully:
- appsscript.json
- ExecMappingManager.html
- SalaryRangesCalculator.gs
```

**Script ID**: `1qG0uAUeO2IP-pnzU1psr4UI7SI72NWYvcq9FdADTDFOFRWdTLo04AJiw`

---

## ğŸ’¡ Usage Examples

### Example 1: Engineering Role (X0)
```javascript
// Software Engineer, US, L5 IC
Region: US
Job Family: Engineering - Software Development (EN.SODE)
Level: L5 IC

Results (X0 - P25 to P90):
- Range Start: $98,200   (P25)
- Range Mid:   $146,700  (P50)
- Range End:   $210,500  (P90)
```

### Example 2: Finance Role (Y1)
```javascript
// Finance Analyst, US, L5 IC
Region: US
Job Family: Finance - FP&A
Level: L5 IC

Results (Y1 - P10 to P62.5):
- Range Start: $75,300   (P10)
- Range Mid:   $116,900  (P40)
- Range End:   $146,700  (P62.5)
```

---

## ğŸ“ Support

If you encounter any issues:

1. **Refresh your Google Sheet** (Ctrl+R / Cmd+R)
2. **Check the execution log**: Extensions â†’ Apps Script â†’ Executions
3. **Verify dropdowns**: Category should only show X0 and Y1
4. **Rebuild Full List**: Menu â†’ Build â†’ Rebuild Full List

### Rollback (if needed):
```bash
cd "/Users/mujahidreza/Cursor/Cloud Agent Space/salary-ranges"
git checkout v3.2.0-OPTIMIZED
clasp push
```

---

## âœ… Summary

**Status**: âœ… **DEPLOYED AND READY**

- 2 categories instead of 3 (simpler)
- User-friendly labels (Range Start/Mid/End)
- Auto-category assignment (no manual selection)
- Updated ranges for better market alignment
- All documentation updated
- Backward compatible (auto-conversion)

**Refresh your Google Sheet to see the changes!** ğŸ‰

---

**Version**: 3.3.0  
**Released**: 2025-11-27  
**Previous**: 3.2.0-OPTIMIZED

